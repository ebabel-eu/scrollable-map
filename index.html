<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Interactive Scrollable + Zoomable Map</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
    }

    #viewport {
      width: 100vw;
      height: 100vh;
      overflow: scroll;
      position: relative;
      background: #111;
      -ms-overflow-style: none;  /* IE and Edge */
      scrollbar-width: none;     /* Firefox */
    }

    #viewport::-webkit-scrollbar {
      display: none;  /* Chrome, Safari */
    }

    #map {
      width: 4096px;
      height: 3072px;
      transform-origin: top left;
      cursor: grab;
    }

    #map.dragging {
      cursor: grabbing;
    }

    #map img {
      width: 100%;
      height: 100%;
      display: block;
      user-select: none;
      pointer-events: none; /* Makes dragging smoother */
    }
  </style>
</head>
<body>

<div id="viewport">
  <div id="map">
    <img src="faerun.jpg" alt="Map">
    <!-- Replace the src above with your own 4096x3072 map image -->
  </div>
</div>

<script>
  const map = document.getElementById("map");
  const viewport = document.getElementById("viewport");

  // Drag-to-scroll
  let isDragging = false;
  let startX, startY, scrollLeft, scrollTop;

  map.addEventListener("mousedown", (e) => {
    isDragging = true;
    map.classList.add("dragging");
    startX = e.clientX;
    startY = e.clientY;
    scrollLeft = viewport.scrollLeft;
    scrollTop = viewport.scrollTop;
  });

  document.addEventListener("mousemove", (e) => {
    if (!isDragging) return;
    const dx = e.clientX - startX;
    const dy = e.clientY - startY;
    viewport.scrollLeft = scrollLeft - dx;
    viewport.scrollTop = scrollTop - dy;
  });

  document.addEventListener("mouseup", () => {
    isDragging = false;
    map.classList.remove("dragging");
  });

  // Zoom with mouse wheel
  let scale = 1;
  const ZOOM_FACTOR = 0.1;
  const MIN_SCALE = 0.2;
  const MAX_SCALE = 4;

  viewport.addEventListener("wheel", (e) => {
    e.preventDefault();

    const rect = map.getBoundingClientRect();
    const mouseX = e.clientX - rect.left;
    const mouseY = e.clientY - rect.top;

    const oldScale = scale;
    scale *= e.deltaY < 0 ? (1 + ZOOM_FACTOR) : (1 - ZOOM_FACTOR);
    scale = Math.max(MIN_SCALE, Math.min(MAX_SCALE, scale));

    const scaleChange = scale / oldScale;

    const scrollX = viewport.scrollLeft;
    const scrollY = viewport.scrollTop;

    viewport.scrollLeft = (mouseX * scaleChange + scrollX) - mouseX;
    viewport.scrollTop = (mouseY * scaleChange + scrollY) - mouseY;

    map.style.transform = `scale(${scale})`;
  }, { passive: false });

  // Center map on load
  window.onload = () => {
    viewport.scrollLeft = (map.offsetWidth - viewport.clientWidth) / 2;
    viewport.scrollTop = (map.offsetHeight - viewport.clientHeight) / 2;
  };
</script>

</body>
</html>
